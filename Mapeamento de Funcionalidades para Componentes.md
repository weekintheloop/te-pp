## Mapeamento de Funcionalidades para Componentes

Este documento mapeia as funcionalidades extraídas de `SIG-TE.txt` e `pasted_content.txt` para os componentes de software propostos, destacando sinergias, sobreposições e lacunas.

| Funcionalidade Essencial | Componentes em `pasted_content.txt` | Funcionalidades em `SIG-TE.txt` | Análise de Coerência e Harmonização |
| :--- | :--- | :--- | :--- |
| **Gerenciamento de Dados (CRUD)** | `DataManager.gs`, `SchemaService.gs`, `ValidationService.gs` | Classe `DB` (com `insert`, `find`, `update`, `delete`), `saveData()` | **Alta Coerência.** O `DataManager.gs` implementa a mesma lógica da classe `DB`, mas de forma mais modular e integrada com `SchemaService` e `ValidationService`. A classe `DB` é mais monolítica. **Ação:** Manter a abordagem modular de `pasted_content.txt` por ser mais manutenível. A funcionalidade de *locking* da classe `DB` é um recurso avançado que pode ser adicionado ao `DataManager.gs` em uma iteração futura, se necessário. |
| **Rastreamento de Histórico** | `DataManager.gs` (feature de History Tracking) | Classe `DB` (com `historyTableName`) | **Alta Coerência.** Ambos os documentos preveem o rastreamento de alterações. A implementação no `DataManager.gs` é mais direta e integrada ao fluxo de `update` e `delete`. **Ação:** A implementação atual no `DataManager.gs` atende ao requisito. |
| **Autenticação e Autorização** | `AuthService.gs` | `getService()` (OAuth2), `authCallback()`, `hasAccess()` | **Alta Coerência.** O `AuthService.gs` formaliza e centraliza a lógica de autenticação e autorização que está dispersa em `SIG-TE.txt`. A abordagem de `pasted_content.txt` com verificação de papéis (Secretários, Monitores) é mais robusta. **Ação:** Utilizar o `AuthService.gs` como o componente definitivo para segurança. |
| **Otimização de Rotas e Mapas** | `GoogleMapsService.gs`, `CriticalRoutesService.gs` | `optimizeRoute()`, `buildGoogleMapUrl()`, `createStaticGoogleMap()` | **Alta Coerência.** O `GoogleMapsService.gs` encapsula perfeitamente as funcionalidades de `optimizeRoute` e `buildGoogleMapUrl`. O `CriticalRoutesService.gs` utiliza esses dados para uma análise de negócio específica (rotas críticas), o que representa uma evolução da funcionalidade básica. **Ação:** Manter a separação de responsabilidades entre `GoogleMapsService` (serviço de utilidade) e `CriticalRoutesService` (serviço de negócio). |
| **Geração de Relatórios e IA** | `GeminiReportService.gs`, `GeminiService.gs` | N/A | **Lacuna em `SIG-TE.txt`.** `pasted_content.txt` introduz a capacidade de IA para geração de relatórios, uma funcionalidade nova e de alto valor. **Ação:** Integrar `GeminiReportService.gs` para fornecer as capacidades de análise e geração de relatórios inteligentes. |
| **Análise de Negócio (Ausências)** | `AbsenceAnalysisService.gs` | N/A | **Lacuna em `SIG-TE.txt`.** Similar à geração de relatórios, esta é uma nova funcionalidade de análise de negócio introduzida em `pasted_content.txt`. **Ação:** Manter o `AbsenceAnalysisService.gs` como um componente para futuras implementações de análise de padrões de ausência. |
| **Notificações** | `NotificationService.gs` | `sendReauthorizationRequest()` (exemplo de email) | **Coerência Parcial.** `SIG-TE.txt` mostra um exemplo de envio de email para reautorização. O `NotificationService.gs` generaliza essa capacidade, criando um serviço central para qualquer tipo de notificação (email, logs, etc.), o que é uma abordagem mais escalável. **Ação:** Utilizar o `NotificationService.gs` para todas as necessidades de notificação. |
| **Agendamento de Tarefas** | `README.md` (instruções para criar triggers) | `adjustScheduleTrigger()`, `respondToHourlyTrigger()` | **Alta Coerência.** Ambos preveem a execução de tarefas agendadas. `SIG-TE.txt` fornece uma implementação concreta para atualização diária de relatórios. `pasted_content.txt` generaliza a instrução. **Ação:** A lógica de `respondToHourlyTrigger()` pode ser adaptada para chamar funções dos novos serviços, como `generateDiagnosticReport()` ou `checkPendingAttestations()`, e configurada conforme o `README.md`. |
| **Frontend e UI** | `index.html`, `styles.css`, `main.js` (SPA) | `doGet()`, `openDialog()`, `sidebar`, arquivos HTML/CSS/JS separados | **Evolução Arquitetural.** `SIG-TE.txt` descreve uma abordagem mais tradicional de web apps no Apps Script, com múltiplos arquivos HTML e diálogos modais. `pasted_content.txt` propõe uma arquitetura de Single-Page Application (SPA), que é mais moderna e oferece uma experiência de usuário superior. **Ação:** Adotar a arquitetura SPA. Os componentes de UI de `SIG-TE.txt` (diálogos, sidebars) podem ser reimplementados como componentes dentro da SPA em `main.js`. |


